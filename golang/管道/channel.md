# Mysql 引擎

## 简述

​	MySQL中的数据用各种不同的技术存储在文件(或者内存)中。这些技术中的每一种技术都使用不同的存储机制、索引技巧、锁定水平并且最终提供广泛的不同的功能和能力。通过选择不同的技术，你能够获得额外的速度或者功能。

## InnoDB

​	InnoDB是MySQL默认的**事务型引擎**，处理大量短期事务，短期事务大部分是正常提交的，很少回滚。InnoDB的性能和自动崩溃恢复特性，使得它在非事务型存储的需求中，也很流行。除了非常特别的原因需要使用其他引擎，InnoDB也是非常好值得花时间研究的对象。

​	InnoDB通过**间隙锁**（next-key  locking）防止幻读的出现。InnoDB是基于**聚簇索引**建立，与其他存储引擎有很大的区别，聚簇索引对主键查询有很高的性能，不过它的二级索引（secondary index，非主键索引）必须包含主键列。所以如果主键列很大的话，索引会很大。

## MyISAM

​	在5.1之前，MyISAM是默认的引擎，有大量的特性，包括全文索引、压缩、空间函数。但是不支持事务和行级锁，而且在崩溃后无法安全恢复。后续版本中MyISAM支持了事务。

- 是对**表锁**，而不是行锁，读取的时候对表加共享锁，写入的时候加排他锁。但是在表有读取查询的同时，也可以往表内写入记录。
- 支持**全文索引**，这是一个基于分词创建的索引，也可以支持复杂的查询。
- 可以选择**延迟更新索引键**，先写到缓存区，只有在清理缓存区或者关闭表的时候才会将索引写入磁盘。这可以极大的提升写入性能，但是在主机崩溃时会造成索引损坏，需要执行修复操作。
- 支持**压缩表**。如果数据在写入后不会修改，那么这个表适合MyISAM压缩表。可以使用myisampack对MyISAM表进行打包，压缩表是不可以修改数据的。压缩表可以极大的减少磁盘占用，因此可以减少磁盘IO，提升性能，压缩表也支持索引，但是索引也是只读的。

